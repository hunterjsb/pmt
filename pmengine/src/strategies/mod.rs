//! Auto-generated strategy registry - DO NOT EDIT MANUALLY
//! Regenerate with: pmstrat transpile --all

mod market_maker;
mod order_test;
mod spread_watcher;
mod sure_bets;

use std::collections::HashMap;
use crate::strategy::Strategy;

pub use market_maker::MarketMaker;
pub use order_test::OrderTest;
pub use spread_watcher::SpreadWatcher;
pub use sure_bets::SureBets;

/// Information about a strategy in the registry.
pub struct StrategyInfo {
    /// Factory function to create a new instance of the strategy.
    pub factory: fn() -> Box<dyn Strategy>,
    /// Whether this strategy requires market discovery (empty tokens list).
    pub requires_market_discovery: bool,
}

/// Returns the strategy registry - a map of strategy names to their info.
///
/// This function is called by the engine to look up strategies by name.
/// The registry is auto-generated by `pmstrat transpile --all`.
pub fn registry() -> HashMap<&'static str, StrategyInfo> {
    let mut m = HashMap::new();

    m.insert("market_maker", StrategyInfo {
        factory: || Box::new(market_maker::MarketMaker::new()),
        requires_market_discovery: false,
    });

    m.insert("order_test", StrategyInfo {
        factory: || Box::new(order_test::OrderTest::new()),
        requires_market_discovery: false,
    });

    m.insert("spread_watcher", StrategyInfo {
        factory: || Box::new(spread_watcher::SpreadWatcher::new()),
        requires_market_discovery: false,
    });

    m.insert("sure_bets", StrategyInfo {
        factory: || Box::new(sure_bets::SureBets::new()),
        requires_market_discovery: true,
    });

    m
}
